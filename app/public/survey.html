<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <title>Matches That Are The Perfect Fit</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"/>
    <!--Google Font-->
    <link href="https://fonts.googleapis.com/css?family=Bangers" rel="stylesheet"/>
    <!-- Chosen CSS External -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.2/chosen.css"/>
    <!--Chosen JS CDN-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.2/chosen.jquery.js" async></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js" async></script>
    <!--My Style -->
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>

<body>
<div class="container">
    <div class="main-container">
        <div class="jumbotron text-center">
            <img src="./img/matchConnection.jpg" class="logo" alt="Perfect Fit" />
            <h1 class="lead-title"> Your Perfect Fit Is a Few Clicks Away</h1>
            <hr>
            <h3>Ready, Set, Let's Do This!</h3>
        </div>
    </div>
    <h3>Survey Questionnaire</h3>
    <h6>*All questionnaire responses utilize the Likert Scale</h6>
    <hr>
    <h3><b>Getting to Know You</b></h3>
    <h6>*Required</h6>
    <h4>* Name: </h4>
    <input type="text" name="" id="name" class="form-control" required/>
    <h4>* Link to Image:</h4>
    <input type="text" name="" id="photo" class="form-control" required/>
    <hr>
    <h3><b>Question ?</b></h3>
    <h4 class="question-text">You like to take chances, make mistakes, get messy!</h4>
    <select data-placeholder="Answer Me" class="chosen-select-deselect" id="q1">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">Your perfect day requires only three things internet access, your favorite comfort food, and a whole lot of sleep</h4>
    <select data-placeholder="And Me" class="chosen-select-deselect" id="q2">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">You believe family, above all else is what matters most</h4>
    <select data-placeholder="Me Three" class="chosen-select-deselect" id="q3">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">You are great at impersonations</h4>
    <select data-placeholder="7 More" class="chosen-select-deselect" id="q4">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">Superheros are "real" in fact you are friends with a few.</h4>
    <select data-placeholder="1/2 Way There" class="chosen-select-deselect" id="q5">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">You love all things 80's</h4>
    <select data-placeholder="Keep Truckin'" class="chosen-select-deselect" id="q6">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">Intuition guides you more than anything you learned in school</h4>
    <select data-placeholder="Brain Buster" class="chosen-select-deselect" id="q7">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">The lab is like a second home to you</h4>
    <select data-placeholder="Me too" class="chosen-select-deselect" id="q8">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">You have a one track mind</h4>
    <select data-placeholder="Almost There" class="chosen-select-deselect" id="q9">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>

    <h3><b>Question ?</b></h3>
    <h4 class="question-text">People take a shinning to you instantly</h4>
    <select data-placeholder="Last One" class="chosen-select-deselect" id="q10">
        <option value=""></option>
        <option value="1">Strongly Disagree</option>
        <option value="2">Disagree</option>
        <option value="3">Neutral</option>
        <option value="4">Agree</option>
        <option value="5">Strongly Agree</option>
    </select>
    <br>
    <br>
    <button type="submit" class="btn btn-warning btn-block" id="submit"><i class="glyphicon glyphicon-ok" aria-hidden="true"></i> Submit
    </button>
    <br>
    <br>
</div>
<!-- Modal that displays perfectly matched friend results -->
<div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- main content-->
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><b>Your Perfect Fit</b></h2>
            </div>
            <div class="modal-body">
                <h2 id="matchName"></h2>
                <!--src found on stack overflow-->
                <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    // picked up from documentation for Chosen
  var config = {
    '.chosen-select': {},
    '.chosen-select-deselect': {
      allow_single_deselect: true
    },
    '.chosen-select-no-single': {
      disable_search_threshold: 10
    },
    '.chosen-select-no-results': {
      no_results_text: 'No results returned!'
    },
    '.chosen-select-width': {
      width: "95%"
    }
  };

  for (var selector in config) {
    $(selector).chosen(config[selector]);
  }

  $("#submit").on("click", function() {
    function validateForm() {
      var isValid = true;
//      swal("Double Check Time", "For the most accurate results all questionnaire questions must be answered", "Error" );
      $('.form-control').each(function() {
        if ($(this).val() === '')
          isValid = false;
      });
      $('.user-selects').each(function() {
        if ($(this).val() === "")
          isValid = false
      })
      return isValid;
    }
    // If all required fields are filled
    if (validateForm() == true) {
      // Create an object for the user's data
      var userResponse = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(),]
      }
      // Grab the URL of the website
      var currentURL = window.location.origin;
      // AJAX post the data to the friends API.
      $.post(currentURL + "/api/friends", userResponse, function(data) {
        // Grab the result from the AJAX post so that the best match's name and photo are displayed.
        $("#matchName").text(data.name);
        $('#matchImg').attr("src", data.photo);
        // Show the modal with the best match
        $("#resultsModal").modal('toggle');
      })
    } else {
        swal("Oops", "Please be sure to fill out all the required items before submitting your questionnaire. Thank you", "error");
    }
    return false;
  });
</script>
</body>

</html>

